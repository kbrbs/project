{% extends 'core/base.html' %}

{% block content %}
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
  <!-- Main Content -->
  <div class="lg:col-span-2">
    <article class="bg-white rounded-2xl shadow-sm overflow-hidden">
      <!-- Header -->
      <div class="relative h-48 bg-gradient-to-br from-purple-100 via-blue-50 to-pink-50 flex items-center justify-center">
        <div class="w-24 h-24 bg-white rounded-2xl shadow-lg flex items-center justify-center">
          <span class="text-5xl">
            {% if article.category == 'science' %}üî¨
            {% elif article.category == 'history' %}üìú
            {% elif article.category == 'culture' %}üé≠
            {% else %}üìö{% endif %}
          </span>
        </div>
      </div>

      <!-- Content -->
      <div class="p-8">
        <div class="flex items-center gap-2 mb-3">
          <span class="px-3 py-1 bg-purple-50 text-purple-600 rounded-full text-xs font-medium">
            {{ article.get_category_display|default:"General" }}
          </span>
          <span class="text-sm text-gray-400">‚Ä¢</span>
          <span class="text-sm text-gray-500">15 min read</span>
        </div>

        <h1 class="text-3xl font-bold text-gray-800 mb-4">{{ article.title }}</h1>
        
        <!-- Article Meta -->
        <div class="flex items-center gap-4 pb-6 mb-6 border-b border-gray-100">
          <div class="flex items-center gap-2">
            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-blue-500 flex items-center justify-center">
              <span class="text-white text-sm font-semibold">RK</span>
            </div>
            <div>
              <p class="text-sm font-medium text-gray-800">Rooted in Knowledge</p>
              <p class="text-xs text-gray-500">Educational Team</p>
            </div>
          </div>
        </div>

        <!-- Content Body -->
        <div class="prose prose-lg max-w-none text-gray-700 leading-relaxed">
          {{ article.content|linebreaks }}
        </div>

        {% if article.video %}
          <div class="mt-8">
            <h3 class="text-lg font-bold text-gray-800 mb-4">Video Lesson</h3>
            <div class="rounded-xl overflow-hidden shadow-md">
              <video controls class="w-full">
                <source src="{{ article.video.url }}">
              </video>
            </div>
          </div>
        {% endif %}

        <!-- Action Buttons -->
        <div class="mt-8 flex flex-wrap gap-3">
          <button x-data x-on:click="$dispatch('open-quiz')" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 text-white font-medium rounded-lg hover:from-purple-600 hover:to-blue-600 transition-all duration-200 shadow-sm hover:shadow-md">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
              <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
            </svg>
            Test Yourself
          </button>
          
          {% if article.pdf %}
            <a href="{{ article.pdf.url }}" class="flex items-center gap-2 px-6 py-3 bg-white border-2 border-gray-200 text-gray-700 font-medium rounded-lg hover:border-purple-500 hover:text-purple-600 transition-all duration-200">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
              Download Guide (PDF)
            </a>
          {% endif %}

          <button class="flex items-center gap-2 px-6 py-3 bg-white border-2 border-gray-200 text-gray-700 font-medium rounded-lg hover:border-purple-500 hover:text-purple-600 transition-all duration-200">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"></path>
            </svg>
            Bookmark
          </button>
        </div>
      </div>
    </article>
  </div>

  <!-- Sidebar -->
  <div class="space-y-6">
    <!-- Quick Actions -->
    <div class="bg-white rounded-2xl shadow-sm p-6">
      <h3 class="text-lg font-bold text-gray-800 mb-4">Quick Actions</h3>
      <div class="space-y-3">
        <button class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition text-left">
          <div class="w-10 h-10 rounded-lg bg-purple-50 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
              <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"></path>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-800">Share Lesson</p>
            <p class="text-xs text-gray-500">Send to friends</p>
          </div>
        </button>
        
        <button class="w-full flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 transition text-left">
          <div class="w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center flex-shrink-0">
            <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-800">Get Help</p>
            <p class="text-xs text-gray-500">Ask questions</p>
          </div>
        </button>
      </div>
    </div>

    <!-- Related Lessons -->
    <div class="bg-white rounded-2xl shadow-sm p-6">
      <h3 class="text-lg font-bold text-gray-800 mb-4">Related Lessons</h3>
      <div class="space-y-3">
        <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 transition">
          <div class="flex gap-3">
            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-orange-100 to-orange-200 flex items-center justify-center flex-shrink-0">
              <span class="text-xl">üå±</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-gray-800 truncate">Growing Arrowroot</p>
              <p class="text-xs text-gray-500">5 min read</p>
            </div>
          </div>
        </a>
        
        <a href="#" class="block p-3 rounded-lg hover:bg-gray-50 transition">
          <div class="flex gap-3">
            <div class="w-12 h-12 rounded-lg bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center flex-shrink-0">
              <span class="text-xl">üç™</span>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-gray-800 truncate">Making Uraro</p>
              <p class="text-xs text-gray-500">8 min read</p>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>

{% if quiz %}
  <!-- Quiz Modal -->
  <div x-data @open-quiz.window="document.getElementById('quiz-modal').classList.remove('hidden')">
    <div id="quiz-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
      <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
        <div class="p-6 border-b border-gray-100 flex items-center justify-between sticky top-0 bg-white">
          <h3 class="text-xl font-bold text-gray-800">Quiz: {{ quiz.title }}</h3>
          <button onclick="document.getElementById('quiz-modal').classList.add('hidden')" class="p-2 hover:bg-gray-100 rounded-lg transition">
            <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <div id="quiz-app" class="p-6">
          <p class="text-sm text-gray-600">Loading quiz...</p>
        </div>
      </div>
    </div>
  </div>
{% endif %}
{% endblock %}
